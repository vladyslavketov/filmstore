{"mappings":"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","sources":["src/common/js/refs.js","src/components/loader/loader.js","src/common/js/onLoad.js","src/common/js/onScroll.js","src/components/btns/btn-up/btn-up.js","src/api/api-tmdb.js","src/templates/createMovieCardMarkup.js","src/templates/createMovieDetailsMarkup.js","src/templates/paginationBtnMarkup.js","src/components/pagination/pagination.js","src/components/modal/modal.js","src/common/js/setBtnDisabled.js","src/common/js/setCurrentClass.js","src/components/search-form/search-form.js","src/layouts/sections/movies/movies.js","src/common/js/createListMarkup.js","src/templates/createMovieDetailsErrorMarkup.js"],"sourcesContent":["const refs = {\n  body: document.querySelector('body'),\n  header: document.querySelector('header'),\n\n  loader: document.querySelector('.loader'),\n  modal: document.querySelector('.modal'),\n  modalCloseBtn: document.querySelector('.backdrop .modal__close-btn'),\n  pagination: document.querySelector('div.pagination'),\n  btnUp: document.querySelector('.btn-up'),\n\n  searchForm: document.querySelector('form.search-form'),\n  btnToTrends: document.querySelector('form .trends'),\n  moviesList: document.querySelector('.movies__list'),\n};\nexport default refs;","import refs from '../../common/js/refs';\n\nexport function showLoader() {\n  refs.body.classList.add('isLoading');\n  refs.loader.parentElement.classList.remove('isHidden');\n}\n\nexport function hideLoader() {\n  refs.body.classList.remove('isLoading');\n  refs.loader.parentElement.classList.add('isHidden');\n}","import { hideLoader } from '../../components/loader/loader';\n\nwindow.addEventListener('load', (() => {\n  window.scrollTo(0, 0);\n  hideLoader();\n}));\n\n// === інший синтаксис ===\n// window.onload = hideLoader();\n// ===  ===\n\n// refs.body.scrollTop();\n// refs.body.scrollIntoView(true);","import refs from './refs';\nimport { showBtnUp, hideBtnUp, onBtnUpClick } from '../../components/btns/btn-up/btn-up';\n\nwindow.addEventListener('scroll', onWindowScroll);\nrefs.btnUp.addEventListener('click', onBtnUpClick);\n\nfunction onWindowScroll() {\n  const windowPageYOffset = window.pageYOffset;\n\n  if (windowPageYOffset > 40) {\n    refs.body.classList.add('isScrolling');\n\n    if (windowPageYOffset > 500) showBtnUp();\n    else if (windowPageYOffset <= 500) hideBtnUp();\n  } else if (windowPageYOffset <= 40) refs.body.classList.remove('isScrolling');\n}","import refs from '../../../common/js/refs';\n\nexport function showBtnUp() {\n  refs.btnUp.classList.remove('isHidden');\n}\n\nexport function hideBtnUp() {\n  refs.btnUp.classList.add('isHidden');\n}\n\nexport function onBtnUpClick() {\n  window.scrollTo(0, 0);\n}","const BASE_URL = 'https://api.themoviedb.org/3/';\nconst API_KEY = '9cb79068ade378f45d510f1b7326cccd';\n\nexport async function getMovies(typeOfQuery, currentPage=1, searchQuery, movieId) {\n  let options;\n  let queryOptions = '';\n  const page = currentPage ? `&page=${currentPage}` : '';\n\n  switch (typeOfQuery) {\n    case 'search':\n      options = `search/movie`;\n      queryOptions = `&query=${searchQuery}`;\n      break;\n\n    case 'details':\n      options = `movie/${movieId}`;\n      break;\n\n    case 'video':\n      options = `movie/${movieId}/videos`;\n      break;\n\n    case 'cast':\n      options = `movie/${movieId}/credits`;\n      break;\n\n    case 'reviews':\n      options = `movie/${movieId}/reviews`;\n      break;\n\n    case 'trend':\n      options = `trending/all/week`;\n      break;\n\n    case 'genres':\n      options = `genre/movie/list`;\n      break;\n\n    default:\n      console.log('Invalid typeOfQuery');\n  }\n\n  const res = await fetch(\n    `${BASE_URL}${options}?api_key=${API_KEY}${queryOptions}${page}`\n  );\n  const resJson = await res.json();\n  return resJson;\n\n  // ===== old return ==================================================\n  // return fetch(`${BASE_URL}${options}?api_key=${API_KEY}${queryOptions}`).then(\n  //   res => res.json()\n  // );\n}\n\n// ===== Деталі ================================================================================\n// /trending/get-trending список найпопулярніших фільмів на сьогодні для створення колекції на головній сторінці.\n// /search/search-movies пошук фільму за ключовим словом на сторінці фільмів.\n// /movies/get-movie-details запит повної інформації про фільм для сторінки кінофільму.\n// /movies/get-movie-credits запит інформації про акторський склад для сторінки кінофільму.\n// /movies/get-movie-reviews запит оглядів для сторінки кінофільму.\n// ================================================================================","export default function createMovieCardMarkup(data) {\n  const { id, movieTitle, movieImg, releaseYear, genresNamesList } = data;\n \n  return `\n    <li class=\"movie-card animate__animated animate__zoomIn\">\n      <img\n        class=\"movie-card__img\"\n        src=${movieImg}\n        alt=${movieTitle}\n        width=\"300\"\n        height=\"450\"\n      />\n      <div class=\"movie-card__desc\">\n        <p class=\"movie-card__title\">${movieTitle}</p>\n        <p class=\"movie-details__genres\">${genresNamesList}</p>\n        <p class=\"movie-card__year\">${releaseYear}</p>\n      </div>\n      <button type=\"button\" class=\"movie-card__details-btn\" data-id=${id} aria-label=\"to open movie details\"></button>\n    </li>\n  `;\n}\n\n// TODO - додати data-filter=${category}","export default function createMovieDetailsMarkup(dataToRender, videoKey) {\n  const { id, movieTitle, movieImg, releaseYear, genresNamesList } = dataToRender;\n  const movieIframe = !videoKey\n    ? ''\n    : ` <iframe\n          src=\"https://www.youtube.com/embed/${videoKey}?cc_load_policy=1?rel=0&showinfo=0&autoplay=1\"\n          title=\"YouTube video player\"\n          frameborder=\"0\"\n          allow=\"accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture;\"\n          allowfullscreen\n          autoplay=\"0\"\n        ></iframe>`;\n\n  return `\n    <div class=\"movie-details animate__animated animate__zoomIn\">\n      <img\n        class=\"movie-details__img\"\n        src=${movieImg}\n        alt=${movieTitle}\n      \n      />\n      <div class=\"movie-details__desc\">\n        <p class=\"movie-details__title\">${movieTitle}</p>\n        <p class=\"movie-details__desc-row movie-details__genres\"><span>Genre</span>${genresNamesList}</p>\n        <p class=\"movie-details__desc-row movie-details__year\"><span>Year</span>${releaseYear}</p>\n        <button type=\"button\" class=\"movie-details__video-play-btn\" data-id=${id} aria-label=\"to open movie details\">Show official trailer</button>\n      </div>\n      <div class=\"movie-details__video isHidden\">${movieIframe}</div>\n    </div>\n  `;\n}\n\n\n// `width=\"448\" height=\"672\"`\n// `width=\"336\" height=\"504\"`\n// `width=\"368\" height=\"552\"`\n\n\n// `width=\"332\" height=\"498\"`????","export default function paginationBtnMarkup(number) {\n  let current = \"\";\n  if (number === 1) { current = \"current\" }\n  \n  return `\n    <button class=\"paginationBtn ${current}\" data-page=\"${number}\" aria-label=\"to open page number ${number}\">${number}</button>\n  `;\n}","import paginationBtnMarkup from '../../templates/paginationBtnMarkup';\n\n// === дізнаємось номер поточної сторінки з дата атрибуту на кнопці, по на якій відбувся евент===\nexport function getCurrentPage(e) {\n  if (!e) return 1;\n  return e.target.dataset.page;\n}\n\nexport function getCurrentItemsPerPage(arrayOfData, perPage = 20 , currentPage = 1) {\n  if (!Array.isArray(arrayOfData)) return [];\n\n  const start = (currentPage - 1) * perPage;\n  const end = start + perPage;\n  const itemsPerPage = arrayOfData.slice(start, end);\n\n  return itemsPerPage;\n}\n\n// === створюємо розмітку списку кнопок пагінації з шаблону === //\n// TODO - додати перевірку і якщо 1 сторінка, то не запускати функцію\nexport function createPaginationBtnListMarkup(pages) {\n  if (pages < 2) return '';\n  let arrayOfBtn = [];\n\n  for (let i = 0; i < pages; i += 1) {\n    arrayOfBtn.push(i + 1);\n  }\n\n  return arrayOfBtn.map(item => paginationBtnMarkup(item)).join('');\n}\n\nexport function hideBtn(e) {\n  const currentPage = getCurrentPage(e);\n  console.log(currentPage);\n  \n\n}","import refs from \"../../common/js/refs\";\n\nconst backdrop = refs.modal.parentElement;\n\nfunction onBackdropClick(e) {\n  if (e.currentTarget === e.target) closeModal();\n}\n\nfunction onEscKeyPress(e) {\n  if (backdrop.classList.contains('isHidden')) return;\n  if (e.code === 'Escape') closeModal();\n}\n\nexport function openModal() {\n  backdrop.classList.remove('isHidden');\n  refs.body.classList.add('modalIsOpen');\n\n  backdrop.addEventListener('click', onBackdropClick);\n  window.addEventListener('keydown', onEscKeyPress);\n  refs.modalCloseBtn.addEventListener('click', closeModal);\n}\n\nexport function closeModal() {\n  backdrop.classList.add('isHidden');\n  refs.body.classList.remove(\"modalIsOpen\");\n  refs.modal.innerHTML = \"\";\n\n  backdrop.removeEventListener('click', onBackdropClick);\n  window.removeEventListener('keydown', onEscKeyPress);\n  refs.modalCloseBtn.removeEventListener('click', closeModal);\n}","export default function setBtnDisabled(e, querySelector) {\n  const disableBtn = document.querySelector(`${querySelector}[disabled]`);\n  if (disableBtn) disableBtn.disabled = false;\n  e.target.disabled = true;\n}","export default function setCurrentClass(e, querySelector) {\n  const currentEl = document.querySelector(querySelector);\n  if (currentEl) { currentEl.classList.remove('current') };\n  e.target.classList.add('current');\n}","import { renderMovies, renderPagination } from \"../../layouts/sections/movies/movies\";\nimport { getMovies } from \"../../api/api-tmdb\";\nimport refs from \"../../common/js/refs\";\n\n// ===== addEventListeners ==================================================\nrefs.searchForm.addEventListener('submit', onFormSubmit);\nrefs.btnToTrends.addEventListener('click', onBtnClick);\n\n// ===== On function ==================================================\nasync function onFormSubmit(e) {\n  e.preventDefault();\n\n  const searchQuery = e.target.elements.searchQuery.value;\n  if (!searchQuery) return;\n\n  const searchRes = await getMovies('search', null, searchQuery, null);\n \n  refs.pagination.setAttribute('data-case', 'search');\n  refs.pagination.setAttribute('data-query', searchQuery);\n  renderMovies(searchRes.results);\n  renderPagination(searchRes.total_pages);\n}\n\nasync function onBtnClick() {\n  refs.pagination.setAttribute('data-case', 'trend');\n  refs.pagination.removeAttribute('data-query');\n\n  const trendRes = await getMovies('trend');\n  renderMovies(trendRes.results);\n  renderPagination(trendRes.total_pages);\n}","import { getMovies } from '../../../api/api-tmdb';\nimport refs from '../../../common/js/refs';\nimport createListMarkup from '../../../common/js/createListMarkup';\nimport createMovieCardMarkup from '../../../templates/createMovieCardMarkup';\nimport createMovieDetailsMarkup from '../../../templates/createMovieDetailsMarkup';\nimport createMovieDetailsErrorMarkup from '../../../templates/createMovieDetailsErrorMarkup';\n\nimport { createPaginationBtnListMarkup, getCurrentPage } from '../../../components/pagination/pagination';\nimport { showLoader, hideLoader } from '../../../components/loader/loader';\nimport { openModal } from '../../../components/modal/modal';\n\nimport '../../../components/search-form/search-form';\nimport setBtnDisabled from '../../../common/js/setBtnDisabled';\nimport setCurrentClass from '../../../common/js/setCurrentClass';\nimport { hideBtn } from '../../../components/pagination/pagination';\n\nlet allGenresList = null;\nlet currentCase = 'trend';\nonFirstLoad();\n\n// ===== addEventListeners ==================================================\nrefs.moviesList.addEventListener('click', onMovieDetailsBtnClick);\nrefs.pagination?.addEventListener('click', onPaginationBtnClick);\n\n// ===== On function ==================================================\nasync function onFirstLoad() {\n  allGenresList = await getAllGenres();\n  const trendRes = await getMovies('trend');\n\n  refs.pagination.setAttribute('data-case', 'trend');\n  renderMovies(trendRes.results);\n  renderPagination(trendRes.total_pages);\n}\n\nasync function onMovieDetailsBtnClick(e) {\n  if (!e.target.classList.contains('movie-card__details-btn')) return;\n  showLoader();\n\n  const currentMovieId = e.target.dataset.id;\n  const detailsRes = await getMovies('details', null, null, currentMovieId).then(res => { return res.status ? res : null})\n  const checkedMovieName = detailsRes ? checkMovieName(e, detailsRes) : null;\n\n  if (detailsRes && checkedMovieName) {\n    const dataToRender = getDataToRender(detailsRes);\n    const videoRes = getMovies('video', null, null, currentMovieId);\n    const videoKey = await getMovieDetailsVideoKey(videoRes);\n    const movieDetailsMarkup = createMovieDetailsMarkup(dataToRender, videoKey);\n    refs.modal.innerHTML = movieDetailsMarkup;\n\n    const movieDetailsPlayBtnRef = refs.modal.querySelector('.movie-details__video-play-btn');\n    videoKey ? movieDetailsPlayBtnRef.addEventListener('click', onMovieDetailsPlayBtnClick) : movieDetailsPlayBtnRef.classList.add('isHidden'); // TODO - remove EventListener\n  } else {\n    const movieDetailsMarkup = createMovieDetailsErrorMarkup();\n    refs.modal.innerHTML = movieDetailsMarkup;\n  }\n\n  openModal();\n  hideLoader();\n}\n\nfunction onMovieDetailsPlayBtnClick(e) {\n  const movieDetailsVideoRef = refs.modal.querySelector(\".movie-details__video\");\n  movieDetailsVideoRef.classList.toggle('isHidden');\n  e.target.textContent === 'Show official trailer'\n    ? (e.target.textContent = 'Hide official trailer')\n    : (e.target.textContent = 'Show official trailer');\n}\n\nasync function onPaginationBtnClick(e) {\n  if (e.target.nodeName !== 'BUTTON') return;\n  showLoader();\n  const currentPage = getCurrentPage(e);\n  const currentCase = refs.pagination.dataset.case;\n  const currentQuery = refs.pagination.dataset.query;\n\n  const res = await getMovies(currentCase, currentPage, currentQuery);\n  renderMovies(res.results);\n\n  hideBtn(e);\n  setBtnDisabled(e, '.paginationBtn');\n  setCurrentClass(e, '.paginationBtn.current');\n  // renderContent(filterData, currentPage);\n  hideLoader();\n}\n\n// ===== GET function ==================================================\nasync function getAllGenres() {\n  const genresRes = await getMovies('genres');\n  return genresRes.genres;\n}\n\nfunction getGenresNames(genresIds) {\n  const genresNames = genresIds\n    .map(genreId => allGenresList.find(genre => genreId === genre.id)?.name)\n    .filter(genreName => genreName !== undefined)\n    .join(', ');\n\n  return genresNames;\n}\n\nfunction getDataArrayToRender(dataArray) {\n  const dataArrayToRender = dataArray.map(data => {\n    const {\n      id,\n      name,\n      title,\n      genre_ids,\n      poster_path,\n      release_date,\n      first_air_date,\n    } = data;\n    const movieTitle = title || name;\n    const genresNamesList = getGenresNames(genre_ids);\n    const movieImg = poster_path\n      ? `https://image.tmdb.org/t/p/w500${poster_path}`\n      : './images/coming_soon.webp';\n    const releaseDate = release_date ? release_date : first_air_date;\n    const releaseYear = releaseDate ? releaseDate.slice(0, 4) : '';\n\n    return { id, movieTitle, movieImg, releaseYear, genresNamesList };\n  });\n\n  return dataArrayToRender;\n}\n\nfunction getDataToRender(dataArray) {\n  const { id, name, title, genres, poster_path, release_date, firstDate } = dataArray;\n  const movieTitle = title || name;\n  const genresNamesList = genres?.map(genr => genr.name).join(', ');\n  const movieImg = poster_path\n    ? `https://image.tmdb.org/t/p/w500${poster_path}`\n    : './images/coming_soon.webp';\n  const releaseDate = release_date ? release_date : firstDate;\n  const releaseYear = releaseDate ? releaseDate.slice(0, 4) : '';\n\n  return { id, movieTitle, movieImg, releaseYear, genresNamesList }\n}\n\nasync function getMovieDetailsVideoKey(data) {\n  const { results } = await data;\n  if (!results || results.length < 1) return null;\n\n  const officialTrailer = results.find(res => res.name.toLowerCase() === 'official trailer');\n  const anyTrailer = results.find(res => res.name.toLowerCase().includes('trailer'));\n  const anyVideo = results[0];\n\n  return officialTrailer?.key || anyTrailer?.key || anyVideo?.key\n}\n\n// ===== other function ==================================================\nexport function renderMovies(moviesData) {\n  const dataArrayToRender = getDataArrayToRender(moviesData);\n  const listMarkup = createListMarkup(dataArrayToRender, createMovieCardMarkup);\n  refs.moviesList.innerHTML = listMarkup;\n}\n\nexport async function renderPagination(pages) {\n  if (!pages || pages < 2) return (refs.pagination.innerHTML = ''); // TODO -  передивитись блок іф\n  refs.pagination.innerHTML = createPaginationBtnListMarkup(pages);\n}\n\nfunction checkMovieName(e, dataToCheck) {\n  const currentTitle = e.target.parentElement.querySelector('.movie-card__title').textContent;\n  const { name, title } = dataToCheck;\n  const movieTitle = title || name;\n  return (currentTitle !== movieTitle) ? false : true;\n}\n\n\n// const detailsRes = async function getdetailsRes() {\n//   try {\n//     const detailsRes = await getMovies('details', currentMovieId);\n//     return detailsRes;\n//   } catch (error) {\n//     return error;\n//   }\n// };","export default function createListMarkup(dataArray, createItemMarkup) {\n  if (!Array.isArray(dataArray) || !dataArray.length > 0)\n    return 'Нажаль данні не завантажились( Спробуйте пізніше'; // TODO - add notification\n  return dataArray.map(data => createItemMarkup(data)).join('');\n}","export default function createMovieDetailsErrorMarkup() {\n  return `\n    <div class=\"movie-details animate__animated animate__zoomIn\">\n      <img\n        class=\"movie-details__img\"\n        src='./images/coming_soon.webp'\n        alt='Error image'\n      />\n      <div class=\"movie-details__desc\">\n        <p class=\"movie-details__title\">Ooops! Sorry, but we dont find information</p>\n      </div>\n    </div>\n  `;\n}"],"names":["$07f5a4e5854dd40e$export$2e2bcd8739ae039","body","document","querySelector","header","loader","modal","modalCloseBtn","pagination","btnUp","searchForm","btnToTrends","moviesList","$5c0d9e93748f353d$export$56525cbb1fcd885c","classList","add","parentElement","remove","$5c0d9e93748f353d$export$5cee2c2772922923","window","addEventListener","scrollTo","windowPageYOffset","pageYOffset","async","$c6feac49e3432087$export$60e1c8f5f122c5ac","typeOfQuery","currentPage","searchQuery","movieId","options","queryOptions","page","console","log","res","fetch","json","$431b21e7d8ed4ba3$export$2e2bcd8739ae039","data","id","movieTitle","movieImg","releaseYear","genresNamesList","$10fc28c00008f333$export$2e2bcd8739ae039","dataToRender","videoKey","$315e90768ca3edda$export$2e2bcd8739ae039","number","current","$6495377852be1188$export$7945ba8eb1c827e6","e","target","dataset","$6495377852be1188$export$b41e8733ea79562e","pages","arrayOfBtn","i","push","map","item","join","$6495377852be1188$export$112b70307d947b36","$962769fdde024266$var$backdrop","$962769fdde024266$var$onBackdropClick","currentTarget","$962769fdde024266$export$3f6fecd573f3fa48","$962769fdde024266$var$onEscKeyPress","contains","code","innerHTML","removeEventListener","$13e5730f8ca5714d$export$2e2bcd8739ae039","disableBtn","disabled","$e43105b3b32737a4$export$2e2bcd8739ae039","currentEl","preventDefault","elements","value","searchRes","setAttribute","$55b846596b28c106$export$1a30573fde3dfc62","results","$55b846596b28c106$export$825408fbca4f2040","total_pages","removeAttribute","trendRes","$55b846596b28c106$var$allGenresList","$55b846596b28c106$var$onMovieDetailsPlayBtnClick","toggle","textContent","$55b846596b28c106$var$getDataArrayToRender","dataArray","name","title","genre_ids","poster_path","release_date","first_air_date","genreId","find","genre","filter","genreName","undefined","releaseDate","slice","moviesData","dataArrayToRender","listMarkup","createItemMarkup","Array","isArray","length","genres","$55b846596b28c106$var$getAllGenres","$55b846596b28c106$var$onFirstLoad","currentMovieId","detailsRes","then","status","checkedMovieName","dataToCheck","currentTitle","$55b846596b28c106$var$checkMovieName","firstDate","genr","$55b846596b28c106$var$getDataToRender","videoRes","officialTrailer","toLowerCase","anyTrailer","includes","anyVideo","key","$55b846596b28c106$var$getMovieDetailsVideoKey","movieDetailsMarkup","movieDetailsPlayBtnRef","nodeName","currentCase","case","currentQuery","query"],"version":3,"file":"index.8399cc56.js.map"}